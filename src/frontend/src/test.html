<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <title>Test Stripe Checkout</title>
</head>

<body style="text-align:center; margin-top:40px; font-family: Arial">

    <h2>Demo Stripe Checkout</h2>

    <button id="payBtn" style="padding:12px; font-size:18px;">
        Thanh toán $20
    </button>

    <script>
        document.getElementById("payBtn").addEventListener("click", async () => {
            try {
                const res = await fetch(
                    "https://nmcnpm-payment-service.onrender.com/payment/create-payment",
                    {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "x-api-key": "81aa801afec422868bea639e7c7bde4be900f533a4e1c755bffbb7c331c205b972a70e93bae29c79023cfe53a1fd9abd7c825cd57a1a46152fcaaacabfda350f"
                        },
                        body: JSON.stringify({
                            userId: "8cf89cd2-28a3-4bce-b538-cb361d030c04", // thay userId
                            productName: "PREMIUM_ONE_MONTH",
                            amount: 2000, // $20.00
                            description: "Premium 1 month",
                            image: "https://via.placeholder.com/300x300.png?text=Premium",
                            email: "user@example.com", // thay email user
                            price: 2000,
                            currency: "usd",
                            quantity: 1
                        })
                    }
                );

                const data = await res.json();
                console.log("Response:", data);

                if (data?.result?.url) {
                    window.location.href = data.result.url;
                } else {
                    alert("Không lấy được URL thanh toán");
                }
            } catch (err) {
                console.error(err);
                alert("Có lỗi xảy ra, xem console");
            }
        });
    </script>

</body>

</html>